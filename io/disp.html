<!--
  Copyright 2015, 2015 MakerCollider .

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/javascript">
    RED.nodes.registerType('dispImg',{
        category: 'atlas',
        color: '#a6bbcf',
        defaults: {
            name: {value:"dispImg"},
        },
        inputs:1,
        outputs:0,
        icon: "file.png",
        label: function() {
            return this.name;
        },
        oneditsave: function() {
            window.open("/atlas/dispImg.html", "newwindow", "toolbar=no,location=no,scrollbars=yes, width=320,height=240,z-look=yes");
        }
    });
</script>

<script type="text/x-red" data-template-name="dispImg">
    <div class="form-row">
     <p>click OK to open preview window</p>
    </div>
</script>

<script type="text/x-red" data-help-name="dispImg">
<h3 id="图像显示节点">图像显示节点</h3>

<p>本节点接收Base64编码后的图像信息并通过网页显示出来。</p>

<h4 id="参数配置">参数配置</h4>

<p>无</p>

<h4 id="输入量">输入量</h4>

<p>1.msg.payload：Base64编码后的数据</p>

<h4 id="输出量">输出量</h4>

<p>无</p>

<h4 id="使用方法">使用方法</h4>

<ol>
<li>使用时，单击dispImg节点并点确定按钮，会弹出显示图像的网页窗口。</li>
</ol>
</script>

<script type="text/javascript">
    RED.nodes.registerType('dispGauge',{
        category: 'atlas',
        color: '#a6bbcf',
        defaults: {
            name: {value:"dispGauge"},
            min: {value:0},
            max: {value:100},
            title: {value: 'dispGauge'},
            unit: {value: ''}
        },
        inputs:1,
        outputs:0,
        icon: "file.png",
        label: function() {
            return this.name;
        },
        oneditsave: function() {
            var cmd = "";
            for(idx in this) {
                if(typeof this[idx] != 'object')
                  cmd += idx + "=" + this[idx] + "&";
            }
            cmd += "alta=1";

            console.log(cmd);

            window.open("/atlas/client.html?" + cmd, "newwindow", "toolbar=no,location=no,scrollbars=yes, width=320, height=180, z-look=yes");
        }
    });
</script>

<script type="text/x-red" data-template-name="dispGauge">
    <div class="form-row">
     <p>click OK to open preview window</p>
    </div>

    <div class="form-row">
      <label for="node-input-name"><i class="icon-tag"></i> name</label>
      <input type="text" id="node-input-name">
    </div>

    <div class="form-row">
      <label for="node-input-min"><i class="icon-tag"></i> min</label>
      <input type="text" id="node-input-min">
    </div>

    <div class="form-row">
      <label for="node-input-max"><i class="icon-tag"></i> max</label>
      <input type="text" id="node-input-max">
    </div>

    <div class="form-row">
      <label for="node-input-unit"><i class="icon-tag"></i> unit</label>
      <input type="text" id="node-input-unit">
    </div>

    <div class="form-row">
      <label for="node-input-title"><i class="icon-tag"></i> title</label>
      <input type="text" id="node-input-title">
    </div>
</script>

<script type="text/x-red" data-help-name="dispGauge">
<h3 id="数值范围显示节点">数值范围显示节点</h3>

<p>本节点可以将number类型的数据通过图表显示出来。</p>

<h4 id="参数配置">参数配置</h4>

<ol>
    <li>name：参数名称</li>
    <li>min：输出范围最小值</li>
    <li>max：输出范围最大值</li>
    <li>unit：输出值单位</li>
    <li>title：输出图表名称</li>
</ol>

<h4 id="输入量">输入量</h4>

<p>1.msg.payload：类型为number型数据</p>

<h4 id="输出量">输出量</h4>

<p>无</p>

<h4 id="使用方法">使用方法</h4>

<ol>
<li>使用时，单击dispGauge节点并点确定按钮，会弹出显示范围的图表窗口，会根据输入值调整半圆图表的比例，最上面还有一个开关按钮，可以固定当前的显示值。</li>
</ol>
</script>
